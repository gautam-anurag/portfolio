<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <link rel="icon" href="resources/anurag_gautam-favicon-orange.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Reset and Basic Setup */
        :root {
            --primary-bg: #101010;
            --secondary-bg: #1e1e1e;
            --text-primary: #f0f0f0;
            --text-secondary: #a0a0a0;
            --accent-color: #FF6600; /* Orange Accent */
        }

        /* Custom Selection Styling */
        ::-moz-selection { /* Code for Firefox */
            color: var(--accent-color);
            background: rgba(255, 255, 255, 0.1);
        }
        ::selection {
            color: var(--accent-color);
            background: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        body.modal-open {
            overflow: hidden;
        }
        
        /* Prevent Image Download */
        img {
            pointer-events: none;
        }

        /* Header */
        header {
            /* padding: 1.5rem 5%; */
            padding: 1rem 5%;
            background-color: rgba(16, 16, 16, 0.8);
            backdrop-filter: blur(10px);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 100;
            /* border-bottom: 1px solid #2a2a2a; */
        }
        header img{
            opacity: 0.85;
            transition: opacity 0.2s ease-in-out; /* Smooth fade for slideshow */
        }
        header img:hover{
            opacity: 1;
        }

        nav {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        nav h1 {
            /* font-size: 1.5rem; */
            font-size: 2rem;
            font-weight: 700;
        }

        /* Hero Section */
        .hero {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            position: relative;
            background-image: url('resources/cover-image.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        .hero::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(0,0,0,0.4));
        }

        .hero-content {
            z-index: 1;
            max-width: 800px;
            padding: 0 1rem;
        }

        .hero-content h2 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
            display: inline-block; /* For typing effect */
        }

        .hero-content p {
            font-size: 1.25rem;
            font-weight: 300;
            color: var(--text-secondary);
            opacity: 0; /* Initially hidden for fade-in */
            transition: opacity 1.5s ease;
        }

        /* About Section */
        .about {
            padding: 6rem 5%;
            background-color: #0c0c0c;
            text-align: center;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .about-content {
            max-width: 800px;
            margin: 0 auto;
        }
        .about h2 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            font-weight: 700;
        }
        .about p {
            font-size: 1.15rem;
            color: var(--text-secondary);
            line-height: 1.8;
        }
        .about p:not(:last-child) {
            margin-bottom: 1.5rem;
        }


        /* Portfolio Gallery */
        .portfolio {
            padding: 6rem 5%;
        }

        .portfolio-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 4rem;
            font-weight: 700;
        }

        .portfolio-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 2.5rem;
        }

        .portfolio-item {
            background-color: var(--secondary-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            opacity: 0; /* Initially hidden for animation */
            transform: translateY(30px); /* Start slightly lower for animation */
            display: flex;
            flex-direction: column;
            flex: 1 1 400px; /* Flex properties for responsive wrapping */
            max-width: 450px; /* Prevent items from becoming too wide */
        }
        
        .portfolio-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .portfolio-item:hover {
            transform: translateY(-5px);
            /* box-shadow: 0 12px 30px rgba(74, 144, 226, 0.2); */
        }

        .image-container {
            position: relative;
            overflow: hidden;
            background-color: #000;
        }

        .image-container::before {
            content: '';
            display: block;
            padding-top: 133.33%; /* Correct 4:3 aspect ratio for 1200x1600 images */
        }

        .image-container img:not(.watermark) {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; /* Cover the container without stretching */
            display: block;
            transition: opacity 0.8s ease-in-out; /* Smooth fade for slideshow */
        }
        
        .image-container .watermark {
            position: absolute;
            bottom: 12px;
            /* left: 50%; */
            left: 1.5rem;
            transform: translateX(-50%);
            height: 1.25rem;
            width: auto;
            z-index: 5;
            opacity: 0.6;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .portfolio-item:hover .image-container .watermark {
            /* opacity: 0.9; */
            opacity: 1;
        }

        .loader {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 4px solid rgba(255, 255, 255, 0.2);
            border-left-color: var(--accent-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            z-index: 10;
        }

        @keyframes spin {
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        @keyframes blink-caret { 
            from, to { border-color: transparent } 
            50% { border-color: var(--accent-color); } 
        }

        .item-info {
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .item-info h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        h3 a{
            text-decoration: none;
            color: var(--text-primary);
        }

        .item-info p {
            font-size: 1rem;
            color: var(--text-secondary);
            flex-grow: 1;
            margin-bottom: 1.5rem;
        }

        .view-btn {
            background-color: transparent;
            color: var(--accent-color);
            border: 2px solid var(--accent-color);
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 700;
            transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
        }

        /* Modal / Lightbox */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.9);
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            position: relative;
            margin: auto;
            padding: 0;
            width: 90%;
            max-width: 600px;
            top: 50%;
            transform: translateY(-50%);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateY(-60%); opacity: 0; }
            to { transform: translateY(-50%); opacity: 1; }
        }

        .modal-image-wrapper {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            line-height: 0;
        }

        .modal-image {
            width: 100%;
            border-radius: 8px;
            transition: opacity 0.4s ease;
        }

        .modal-watermark {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            height: 1.75rem;
            width: auto;
            z-index: 1002;
            /* opacity: 0.5; */
            opacity: 1;
            pointer-events: none;
        }

        .close-btn, .prev-btn, .next-btn {
            cursor: pointer;
            position: absolute;
            color: white;
            font-weight: bold;
            transition: 0.3s ease;
            user-select: none;
        }

        .close-btn {
            top: 15px;
            right: 35px;
            font-size: 40px;
            z-index: 1001;
        }

        .prev-btn, .next-btn {
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            padding: 16px;
            background-color: rgba(0,0,0,0.4);
            border-radius: 0 3px 3px 0;
        }

        .prev-btn {
            left: 0;
            border-radius: 3px 0 0 3px;
        }

        .next-btn {
            right: 0;
            border-radius: 3px 0 0 3px;
        }
        
        #caption {
            text-align: center;
            color: var(--text-primary);
            padding-top: 1rem;
            font-size: 1.1rem;
            font-weight: 300;
            transition: opacity 0.4s ease;
        }
        
        /* Contact Form */
        .contact {
            padding: 6rem 5% 4rem;
            /* background-color: var(--secondary-bg); */
            background-color: var(--primary-bg);
            
            min-height: calc(100vh - 5rem);
            min-width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .contact-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        
        .contact-subtitle {
            text-align: center;
            font-size: 1.1rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 4rem;
        }

        .contact-form {
            max-width: 700px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 700;
            color: var(--text-secondary);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem 1rem;
            border-radius: 8px;
            border: 1px solid #333;
            background-color: #101010;
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-color);
            /* box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.3); */
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .submit-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 700;
            transition: background-color 0.3s ease, transform 0.2s ease;
            width: 100%;
        }

        .submit-btn:disabled {
            background-color: #555;
            cursor: not-allowed;
        }
        
        #form-messages {
            margin-top: 1.5rem;
            text-align: center;
            font-size: 1rem;
            font-weight: bold;
            display: none; /* Hidden by default */
        }
        
        #form-messages.success {
            color: #4CAF50;
        }

        #form-messages.error {
            color: #F44336;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem 5%;
            background-color: #0a0a0a;
            border-top: 1px solid #2a2a2a;
        }

        footer p {
            color: var(--text-secondary);
        }

        /* Responsive Design */
        @media (min-width: 768px) {
            .hero-content h2 {
                font-size: 4.5rem;
            }

            .modal-content {
                max-width: 800px;
            }
        }

        @media (max-width: 768px) {
            header {
                padding: 8px 5%;
            }
            .hero-content h2 {
                font-size: 3rem;
            }
        }

    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <nav>
            <img src="resources/anurag_gautam-favicon-white.png" alt="" style="height: 3rem; width: auto; padding: 0px 15px;">
            <!-- <h1>Anurag Gautam</h1> -->
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <h2 id="hero-title"></h2>
                <p id="hero-subtitle"></p>
            </div>
        </section>

        <!-- About Section -->
        <section class="about">
            <div class="about-content">
                <h2>A Passion Project</h2>
                <p>This collection isn't just a portfolio; it's the start of a journey. As a photography enthusiast with a keen eye for product design, I've always admired brands that merge form and function seamlessly. I personally purchased and photographed each case in this collection to capture the unique story each one tells—from its texture and color to the precise way it complements the device it protects.</p>
                <p>This project was born from a genuine appreciation for great design and a desire to bring products to life through the lens. It represents my first step into professional collaboration, driven by passion and a commitment to quality. I believe the best partnerships come from a place of mutual respect for the craft, and I'm excited to see where this path leads.</p>
            </div>
        </section>


        <!-- Portfolio Gallery -->
        <section class="portfolio">
            <!-- <h2 class="portfolio-title">The Collection</h2> -->
            <h2 class="portfolio-title">Portfolio</h2>
            <div class="portfolio-grid">
                <!-- Item 1: 11zeros Corrugated -->
                <div class="portfolio-item" data-title="11zeros - Corrugated" data-images="11zeros-Corrugated_1.jpg,11zeros-Corrugated_2.jpg">
                    <div class="image-container">
                        <div class="loader"></div>
                        <img src="11zeros-Corrugated_1.jpg" alt="11zeros Corrugated Case - View 1">
                        <img src="11zeros-Corrugated_2.jpg" alt="11zeros Corrugated Case - View 2">
                        <img src="resources/anurag_gautam-favicon-white.png" alt="Watermark" class="watermark">
                    </div>
                    <div class="item-info">
                        <h3>
                            <a href="https://11zeros.com/products/corrugated-pc-case?variant=49534106206514">11zeros - Corrugated</a>
                        </h3>
                        <p>A bold design with a textured, industrial feel and striking orange accents.</p>
                        <button class="view-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                            <span>View Gallery</span>
                        </button>
                    </div>
                </div>

                <!-- Item 2: Caseology Nano Pop -->
                <div class="portfolio-item" data-title="Caseology - Nano Pop" data-images="CASEOLOGY-Nano-Pop_1.jpg,CASEOLOGY-Nano-Pop_2.jpg">
                    <div class="image-container">
                        <div class="loader"></div>
                        <img src="CASEOLOGY-Nano-Pop_1.jpg" alt="Caseology Nano Pop - View 1">
                        <img src="CASEOLOGY-Nano-Pop_2.jpg" alt="Caseology Nano Pop - View 2">
                        <img src="resources/anurag_gautam-favicon-white.png" alt="Watermark" class="watermark">
                    </div>
                    <div class="item-info">
                        <h3>
                            <a href="https://www.spigen.com/pages/caseology">Caseology - Nano Pop</a>
                        </h3>
                        <p>Minimalist and sleek with a smooth matte finish and a contrasting camera ring.</p>
                        <button class="view-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                            <span>View Gallery</span>
                        </button>
                    </div>
                </div>

                <!-- Item 3: Spigen Liquid Air -->
                <div class="portfolio-item" data-title="Spigen - Liquid Air" data-images="Spigen-Liquid-Air_1.jpg,Spigen-LiquidAir_2.jpg">
                    <div class="image-container">
                        <div class="loader"></div>
                        <img src="Spigen-Liquid-Air_1.jpg" alt="Spigen Liquid Air - View 1">
                        <img src="Spigen-LiquidAir_2.jpg" alt="Spigen Liquid Air - View 2">
                        <img src="resources/anurag_gautam-favicon-white.png" alt="Watermark" class="watermark">
                    </div>
                    <div class="item-info">
                        <h3>
                            <a href="https://spigen.in/products/galaxy-s23-series-case-liquid-air?srsltid=AfmBOorxYwRRTeCnMvFuPL9RhMHXksBsVRBD3q1ZVvMSakO_1HeR1j-Y">Spigen - Liquid Air</a>
                        </h3>
                        <p>A slim, form-fitted case with a modern geometric pattern for enhanced grip and style.</p>
                        <button class="view-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                            <span>View Gallery</span>
                        </button>
                    </div>
                </div>
                
                <!-- Item 4: Casesily Carbon Fiber -->
                <div class="portfolio-item" data-title="Casesily - Carbon Fiber" data-images="Casesily-Carbon-Fiber_1.jpg,Casesily-Carbon-Fiber_2.jpg">
                    <div class="image-container">
                        <div class="loader"></div>
                        <img src="Casesily-Carbon-Fiber_1.jpg" alt="Casesily Carbon Fiber - View 1">
                        <img src="Casesily-Carbon-Fiber_2.jpg" alt="Casesily Carbon Fiber - View 2">
                        <img src="resources/anurag_gautam-favicon-white.png" alt="Watermark" class="watermark">
                    </div>
                    <div class="item-info">
                        <h3>
                            <a href="https://www.casesily.com/products/samsung-galaxy-s23-ultra-daul-shade-carbon-fiber-aramid-kevilar-case?_pos=45&_sid=83ac895a7&_ss=r">Casesily - Carbon Fiber</a>
                        </h3>
                        <p>A classic, sophisticated look featuring a carbon fiber pattern with a central racing stripe.</p>
                        <button class="view-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                            <span>View Gallery</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section class="contact">
            <h2 class="contact-title">Let's Create Together</h2>
            <p class="contact-subtitle">If you believe your product has a story to tell, I'd be honored to help you tell it. Let's start the conversation about our first collaboration.</p>
            <form class="contact-form" id="contact-form">
                <div class="form-group">
                    <label for="brand-name">Your Brand's Name (The one the legends speak of)</label>
                    <input type="text" id="brand-name" name="brandName" required>
                </div>
                <div class="form-group">
                    <label for="contact-name">Your Name (The Hero behind the Brand)</label>
                    <input type="text" id="contact-name" name="contactName" required>
                </div>
                <div class="form-group">
                    <label for="email">Your Email (For top-secret communications)</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="project-details">Your Grand Plan (Tell me about the case that will change the world)</label>
                    <textarea id="project-details" name="projectDetails" required></textarea>
                </div>
                <button type="submit" class="submit-btn" id="submit-button">Let's Collaborate</button>
                <div id="form-messages"></div>
            </form>
        </section>
    </main>
    
    <!-- Modal / Lightbox -->
    <div id="imageModal" class="modal">
        <span class="close-btn">&times;</span>
        <span class="prev-btn">&#10094;</span>
        <span class="next-btn">&#10095;</span>
        <div class="modal-content">
            <div class="modal-image-wrapper">
                <div class="loader modal-loader"></div>
                <img class="modal-image" id="modalImage">
                <img src="resources/anurag_gautam-favicon-white.png" alt="Watermark" class="modal-watermark">
            </div>
            <div id="caption"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>Website by Anurag Gautam</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Prevent image download
            document.querySelectorAll('img').forEach(img => {
                img.addEventListener('contextmenu', e => e.preventDefault());
            });

            // Hero Text Typing Effect
            const heroTitleEl = document.getElementById('hero-title');
            const heroSubtitleEl = document.getElementById('hero-subtitle');
            const titleText = "Project_Cover";
            const subtitleText = "Capturing the Details";

            function typeEffect(element, text, callback) {
                let i = 0;
                element.innerHTML = ""; 
                element.style.borderRight = '3px solid var(--accent-color)';
                element.style.paddingRight = '5px';
                element.style.animation = 'blink-caret .75s step-end infinite';
                element.style.whiteSpace = 'nowrap';
                element.style.overflow = 'hidden';


                function type() {
                    if (i < text.length) {
                        element.innerHTML += text.charAt(i);
                        i++;
                        setTimeout(type, 120);
                    } else {
                        if (callback) {
                             setTimeout(() => {
                                element.style.animation = 'none';
                                element.style.borderRight = 'transparent';
                                callback();
                             }, 1000); 
                        } else {
                            setTimeout(() => {
                                element.style.animation = 'blink-caret .75s step-end infinite';
                            }, 500);
                        }
                    }
                }
                type();
            }

            setTimeout(() => {
                // Initialize subtitle text but keep it hidden
                heroSubtitleEl.textContent = subtitleText;

                typeEffect(heroTitleEl, titleText, () => {
                    heroTitleEl.style.marginBottom = "1rem"; // Restore margin
                    heroSubtitleEl.style.opacity = '1'; // Fade in the static subtitle
                });
            }, 500);


            // Intersection Observer for fade-in
            const portfolioItems = document.querySelectorAll('.portfolio-item');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            portfolioItems.forEach(item => {
                observer.observe(item);
            });

            // Card Image Loading and Slideshow Logic
            document.querySelectorAll('.portfolio-item').forEach(item => {
                const imageContainer = item.querySelector('.image-container');
                if (!imageContainer) return;

                const loader = imageContainer.querySelector('.loader');
                const images = imageContainer.querySelectorAll('img:not(.watermark)'); // Exclude watermark from slideshow
                if (images.length === 0) {
                    if(loader) loader.style.display = 'none';
                    return;
                }

                // Initially hide all images
                images.forEach(img => img.style.opacity = '0');

                const promises = Array.from(images).map(img => {
                    return new Promise((resolve, reject) => {
                        if (img.complete) {
                            resolve();
                        } else {
                            img.onload = resolve;
                            img.onerror = reject;
                        }
                    });
                });

                Promise.all(promises).then(() => {
                    if (loader) loader.style.display = 'none';
                    
                    if (images.length > 1) {
                        let currentIndex = 0;
                        images[currentIndex].style.opacity = '1';

                        setInterval(() => {
                            images[currentIndex].style.opacity = '0';
                            currentIndex = (currentIndex + 1) % images.length;
                            images[currentIndex].style.opacity = '1';
                        }, 3000);
                    } else if (images.length === 1) {
                        images[0].style.opacity = '1';
                    }

                }).catch(error => {
                    console.error("Error loading images for a portfolio item:", error);
                    if (loader) loader.style.display = 'none';
                });
            });

            // Modal Logic
            const modal = document.getElementById("imageModal");
            const modalImg = document.getElementById("modalImage");
            const captionText = document.getElementById("caption");
            const closeBtn = document.querySelector(".close-btn");
            const prevBtn = document.querySelector(".prev-btn");
            const nextBtn = document.querySelector(".next-btn");
            const modalLoader = document.querySelector('.modal-content .loader');

            let currentImages = [];
            let currentImageIndex = 0;

            document.querySelectorAll('.view-btn').forEach(button => {
                button.onclick = function() {
                    const item = this.closest('.portfolio-item');
                    const images = item.dataset.images.split(',');
                    const title = item.dataset.title;

                    currentImages = images;
                    currentImageIndex = 0;
                    
                    modal.style.display = "block";
                    document.body.classList.add("modal-open");
                    
                    updateModalContent(title);
                }
            });

            function updateModalContent(title) {
                modalLoader.style.display = 'block';
                modalImg.style.opacity = '0';
                captionText.style.opacity = '0';

                modalImg.src = currentImages[currentImageIndex];
                
                modalImg.onload = () => {
                    modalLoader.style.display = 'none';
                    modalImg.style.opacity = '1';
                    captionText.style.opacity = '1';
                    captionText.innerHTML = `${title} - Image ${currentImageIndex + 1} of ${currentImages.length}`;
                };

                modalImg.onerror = () => {
                    console.error("Failed to load modal image:", modalImg.src);
                    modalLoader.style.display = 'none';
                    captionText.innerHTML = "Error loading image.";
                    captionText.style.opacity = '1';
                }
            }

            function changeImage(n) {
                currentImageIndex += n;
                if (currentImageIndex >= currentImages.length) {
                    currentImageIndex = 0;
                }
                if (currentImageIndex < 0) {
                    currentImageIndex = currentImages.length - 1;
                }
                const title = document.querySelector(`[data-images="${currentImages.join(',')}"]`).dataset.title;
                updateModalContent(title);
            }
            
            prevBtn.onclick = () => changeImage(-1);
            nextBtn.onclick = () => changeImage(1);

            function closeModal() {
                modal.style.display = "none";
                document.body.classList.remove("modal-open");
            }
            
            closeBtn.onclick = closeModal;

            window.onclick = function(event) {
                if (event.target == modal) {
                    closeModal();
                }
            }

            // Contact Form Submission Logic
            const form = document.getElementById('contact-form');
            const submitButton = document.getElementById('submit-button');
            const formMessages = document.getElementById('form-messages');
            const scriptURL = 'https://script.google.com/macros/s/AKfycbz-nl_YhnNpm-RU930xUasXF8O38qiq92ak54ROXY2b7Oj73o2SQyDoaFBl7IF6TvoW/exec'; 

            form.addEventListener('submit', e => {
                e.preventDefault();
                submitButton.disabled = true;
                submitButton.textContent = 'Sending...';
                formMessages.style.display = 'none';

                fetch(scriptURL, { method: 'POST', body: new FormData(form)})
                    .then(response => response.json())
                    .then(data => {
                        if (data.result === 'success') {
                            formMessages.textContent = "Message sent!";
                            formMessages.className = 'success';
                            form.reset();
                        } else {
                            throw new Error('Form submission failed.');
                        }
                    })
                    .catch(error => {
                        console.error('Error!', error.message);
                        formMessages.textContent = 'Oops! Something went wrong. Please try again later.';
                        formMessages.className = 'error';
                    })
                    .finally(() => {
                        submitButton.disabled = false;
                        submitButton.textContent = 'Launch Collaboration';
                        formMessages.style.display = 'block';
                         setTimeout(() => { formMessages.style.display = 'none'; }, 6000);
                    });
            });
        });
    </script>

</body>
</html>



